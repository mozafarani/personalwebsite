{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/mohammedalzafarani/Desktop/personalwebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/mohammedalzafarani/Desktop/personalwebsite/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { polyfill as eventListenerSignalPolyfill } from './polyfills/event-listener-signal.js';\nimport { isMacOS } from './utils/user-agent.js';\nimport { iterateFocusableElements } from './utils/iterate-focusable-elements.js';\nimport { uniqueId } from './utils/unique-id.js';\neventListenerSignalPolyfill();\nexport var FocusKeys;\n(function (FocusKeys) {\n  FocusKeys[FocusKeys[\"ArrowHorizontal\"] = 1] = \"ArrowHorizontal\";\n  FocusKeys[FocusKeys[\"ArrowVertical\"] = 2] = \"ArrowVertical\";\n  FocusKeys[FocusKeys[\"JK\"] = 4] = \"JK\";\n  FocusKeys[FocusKeys[\"HL\"] = 8] = \"HL\";\n  FocusKeys[FocusKeys[\"HomeAndEnd\"] = 16] = \"HomeAndEnd\";\n  FocusKeys[FocusKeys[\"PageUpDown\"] = 256] = \"PageUpDown\";\n  FocusKeys[FocusKeys[\"WS\"] = 32] = \"WS\";\n  FocusKeys[FocusKeys[\"AD\"] = 64] = \"AD\";\n  FocusKeys[FocusKeys[\"Tab\"] = 128] = \"Tab\";\n  FocusKeys[FocusKeys[\"Backspace\"] = 512] = \"Backspace\";\n  FocusKeys[FocusKeys[\"ArrowAll\"] = 3] = \"ArrowAll\";\n  FocusKeys[FocusKeys[\"HJKL\"] = 12] = \"HJKL\";\n  FocusKeys[FocusKeys[\"WASD\"] = 96] = \"WASD\";\n  FocusKeys[FocusKeys[\"All\"] = 511] = \"All\";\n})(FocusKeys || (FocusKeys = {}));\nvar KEY_TO_BIT = {\n  ArrowLeft: FocusKeys.ArrowHorizontal,\n  ArrowDown: FocusKeys.ArrowVertical,\n  ArrowUp: FocusKeys.ArrowVertical,\n  ArrowRight: FocusKeys.ArrowHorizontal,\n  h: FocusKeys.HL,\n  j: FocusKeys.JK,\n  k: FocusKeys.JK,\n  l: FocusKeys.HL,\n  a: FocusKeys.AD,\n  s: FocusKeys.WS,\n  w: FocusKeys.WS,\n  d: FocusKeys.AD,\n  Tab: FocusKeys.Tab,\n  Home: FocusKeys.HomeAndEnd,\n  End: FocusKeys.HomeAndEnd,\n  PageUp: FocusKeys.PageUpDown,\n  PageDown: FocusKeys.PageUpDown,\n  Backspace: FocusKeys.Backspace\n};\nvar KEY_TO_DIRECTION = {\n  ArrowLeft: 'previous',\n  ArrowDown: 'next',\n  ArrowUp: 'previous',\n  ArrowRight: 'next',\n  h: 'previous',\n  j: 'next',\n  k: 'previous',\n  l: 'next',\n  a: 'previous',\n  s: 'next',\n  w: 'previous',\n  d: 'next',\n  Tab: 'next',\n  Home: 'start',\n  End: 'end',\n  PageUp: 'start',\n  PageDown: 'end',\n  Backspace: 'previous'\n};\nfunction getDirection(keyboardEvent) {\n  var direction = KEY_TO_DIRECTION[keyboardEvent.key];\n  if (keyboardEvent.key === 'Tab' && keyboardEvent.shiftKey) {\n    return 'previous';\n  }\n  var isMac = isMacOS();\n  if (isMac && keyboardEvent.metaKey || !isMac && keyboardEvent.ctrlKey) {\n    if (keyboardEvent.key === 'ArrowLeft' || keyboardEvent.key === 'ArrowUp') {\n      return 'start';\n    } else if (keyboardEvent.key === 'ArrowRight' || keyboardEvent.key === 'ArrowDown') {\n      return 'end';\n    }\n  }\n  return direction;\n}\nfunction shouldIgnoreFocusHandling(keyboardEvent, activeElement) {\n  var key = keyboardEvent.key;\n  var keyLength = _toConsumableArray(key).length;\n  var isTextInput = activeElement instanceof HTMLInputElement && activeElement.type === 'text' || activeElement instanceof HTMLTextAreaElement;\n  if (isTextInput && (keyLength === 1 || key === 'Home' || key === 'End')) {\n    return true;\n  }\n  if (activeElement instanceof HTMLSelectElement) {\n    if (keyLength === 1) {\n      return true;\n    }\n    if (key === 'ArrowDown' && isMacOS() && !keyboardEvent.metaKey) {\n      return true;\n    }\n    if (key === 'ArrowDown' && !isMacOS() && keyboardEvent.altKey) {\n      return true;\n    }\n  }\n  if (activeElement instanceof HTMLTextAreaElement && (key === 'PageUp' || key === 'PageDown')) {\n    return true;\n  }\n  if (isTextInput) {\n    var textInput = activeElement;\n    var cursorAtStart = textInput.selectionStart === 0 && textInput.selectionEnd === 0;\n    var cursorAtEnd = textInput.selectionStart === textInput.value.length && textInput.selectionEnd === textInput.value.length;\n    if (key === 'ArrowLeft' && !cursorAtStart) {\n      return true;\n    }\n    if (key === 'ArrowRight' && !cursorAtEnd) {\n      return true;\n    }\n    if (textInput instanceof HTMLTextAreaElement) {\n      if (key === 'ArrowUp' && !cursorAtStart) {\n        return true;\n      }\n      if (key === 'ArrowDown' && !cursorAtEnd) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nexport var isActiveDescendantAttribute = 'data-is-active-descendant';\nexport var activeDescendantActivatedDirectly = 'activated-directly';\nexport var activeDescendantActivatedIndirectly = 'activated-indirectly';\nexport var hasActiveDescendantAttribute = 'data-has-active-descendant';\nexport function focusZone(container, settings) {\n  var _a, _b, _c, _d, _e;\n  var focusableElements = [];\n  var savedTabIndex = new WeakMap();\n  var bindKeys = (_a = settings === null || settings === void 0 ? void 0 : settings.bindKeys) !== null && _a !== void 0 ? _a : ((settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) ? FocusKeys.ArrowAll : FocusKeys.ArrowVertical) | FocusKeys.HomeAndEnd;\n  var focusOutBehavior = (_b = settings === null || settings === void 0 ? void 0 : settings.focusOutBehavior) !== null && _b !== void 0 ? _b : 'stop';\n  var focusInStrategy = (_c = settings === null || settings === void 0 ? void 0 : settings.focusInStrategy) !== null && _c !== void 0 ? _c : 'previous';\n  var activeDescendantControl = settings === null || settings === void 0 ? void 0 : settings.activeDescendantControl;\n  var activeDescendantCallback = settings === null || settings === void 0 ? void 0 : settings.onActiveDescendantChanged;\n  var currentFocusedElement;\n  var preventScroll = (_d = settings === null || settings === void 0 ? void 0 : settings.preventScroll) !== null && _d !== void 0 ? _d : false;\n  function getFirstFocusableElement() {\n    return focusableElements[0];\n  }\n  function isActiveDescendantInputFocused() {\n    return document.activeElement === activeDescendantControl;\n  }\n  function updateFocusedElement(to) {\n    var directlyActivated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var from = currentFocusedElement;\n    currentFocusedElement = to;\n    if (activeDescendantControl) {\n      if (to && isActiveDescendantInputFocused()) {\n        setActiveDescendant(from, to, directlyActivated);\n      } else {\n        clearActiveDescendant();\n      }\n      return;\n    }\n    if (from && from !== to && savedTabIndex.has(from)) {\n      from.setAttribute('tabindex', '-1');\n    }\n    to === null || to === void 0 ? void 0 : to.setAttribute('tabindex', '0');\n  }\n  function setActiveDescendant(from, to) {\n    var directlyActivated = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (!to.id) {\n      to.setAttribute('id', uniqueId());\n    }\n    if (from && from !== to) {\n      from.removeAttribute(isActiveDescendantAttribute);\n    }\n    if (!activeDescendantControl || !directlyActivated && activeDescendantControl.getAttribute('aria-activedescendant') === to.id) {\n      return;\n    }\n    activeDescendantControl.setAttribute('aria-activedescendant', to.id);\n    container.setAttribute(hasActiveDescendantAttribute, to.id);\n    to.setAttribute(isActiveDescendantAttribute, directlyActivated ? activeDescendantActivatedDirectly : activeDescendantActivatedIndirectly);\n    activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(to, from, directlyActivated);\n  }\n  function clearActiveDescendant() {\n    var previouslyActiveElement = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentFocusedElement;\n    if (focusInStrategy === 'first') {\n      currentFocusedElement = undefined;\n    }\n    activeDescendantControl === null || activeDescendantControl === void 0 ? void 0 : activeDescendantControl.removeAttribute('aria-activedescendant');\n    container.removeAttribute(hasActiveDescendantAttribute);\n    previouslyActiveElement === null || previouslyActiveElement === void 0 ? void 0 : previouslyActiveElement.removeAttribute(isActiveDescendantAttribute);\n    activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(undefined, previouslyActiveElement, false);\n  }\n  function beginFocusManagement() {\n    for (var _len = arguments.length, elements = new Array(_len), _key = 0; _key < _len; _key++) {\n      elements[_key] = arguments[_key];\n    }\n    var filteredElements = elements.filter(function (e) {\n      var _a, _b;\n      return (_b = (_a = settings === null || settings === void 0 ? void 0 : settings.focusableElementFilter) === null || _a === void 0 ? void 0 : _a.call(settings, e)) !== null && _b !== void 0 ? _b : true;\n    });\n    if (filteredElements.length === 0) {\n      return;\n    }\n    var insertIndex = focusableElements.findIndex(function (e) {\n      return (e.compareDocumentPosition(filteredElements[0]) & Node.DOCUMENT_POSITION_PRECEDING) > 0;\n    });\n    focusableElements.splice.apply(focusableElements, [insertIndex === -1 ? focusableElements.length : insertIndex, 0].concat(_toConsumableArray(filteredElements)));\n    var _iterator = _createForOfIteratorHelper(filteredElements),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var element = _step.value;\n        if (!savedTabIndex.has(element)) {\n          savedTabIndex.set(element, element.getAttribute('tabindex'));\n        }\n        element.setAttribute('tabindex', '-1');\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (!currentFocusedElement) {\n      updateFocusedElement(getFirstFocusableElement());\n    }\n  }\n  function endFocusManagement() {\n    for (var _len2 = arguments.length, elements = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      elements[_key2] = arguments[_key2];\n    }\n    for (var _i = 0, _elements = elements; _i < _elements.length; _i++) {\n      var element = _elements[_i];\n      var focusableElementIndex = focusableElements.indexOf(element);\n      if (focusableElementIndex >= 0) {\n        focusableElements.splice(focusableElementIndex, 1);\n      }\n      var savedIndex = savedTabIndex.get(element);\n      if (savedIndex !== undefined) {\n        if (savedIndex === null) {\n          element.removeAttribute('tabindex');\n        } else {\n          element.setAttribute('tabindex', savedIndex);\n        }\n        savedTabIndex.delete(element);\n      }\n      if (element === currentFocusedElement) {\n        var nextElementToFocus = getFirstFocusableElement();\n        updateFocusedElement(nextElementToFocus);\n      }\n    }\n  }\n  beginFocusManagement.apply(void 0, _toConsumableArray(iterateFocusableElements(container)));\n  updateFocusedElement(getFirstFocusableElement());\n  var observer = new MutationObserver(function (mutations) {\n    var _iterator2 = _createForOfIteratorHelper(mutations),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var mutation = _step2.value;\n        var _iterator4 = _createForOfIteratorHelper(mutation.removedNodes),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var removedNode = _step4.value;\n            if (removedNode instanceof HTMLElement) {\n              endFocusManagement.apply(void 0, _toConsumableArray(iterateFocusableElements(removedNode)));\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    var _iterator3 = _createForOfIteratorHelper(mutations),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _mutation = _step3.value;\n        var _iterator5 = _createForOfIteratorHelper(_mutation.addedNodes),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var addedNode = _step5.value;\n            if (addedNode instanceof HTMLElement) {\n              beginFocusManagement.apply(void 0, _toConsumableArray(iterateFocusableElements(addedNode)));\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  });\n  observer.observe(container, {\n    subtree: true,\n    childList: true\n  });\n  var controller = new AbortController();\n  var signal = (_e = settings === null || settings === void 0 ? void 0 : settings.abortSignal) !== null && _e !== void 0 ? _e : controller.signal;\n  signal.addEventListener('abort', function () {\n    endFocusManagement.apply(void 0, focusableElements);\n  });\n  var elementIndexFocusedByClick = undefined;\n  container.addEventListener('mousedown', function (event) {\n    if (event.target instanceof HTMLElement && event.target !== document.activeElement) {\n      elementIndexFocusedByClick = focusableElements.indexOf(event.target);\n    }\n  }, {\n    signal: signal\n  });\n  if (activeDescendantControl) {\n    container.addEventListener('focusin', function (event) {\n      if (event.target instanceof HTMLElement && focusableElements.includes(event.target)) {\n        activeDescendantControl.focus({\n          preventScroll: preventScroll\n        });\n        updateFocusedElement(event.target);\n      }\n    });\n    container.addEventListener('mousemove', function (_ref) {\n      var target = _ref.target;\n      if (!(target instanceof Node)) {\n        return;\n      }\n      var focusableElement = focusableElements.find(function (element) {\n        return element.contains(target);\n      });\n      if (focusableElement) {\n        updateFocusedElement(focusableElement);\n      }\n    }, {\n      signal: signal,\n      capture: true\n    });\n    activeDescendantControl.addEventListener('focusin', function () {\n      if (!currentFocusedElement) {\n        updateFocusedElement(getFirstFocusableElement());\n      } else {\n        setActiveDescendant(undefined, currentFocusedElement);\n      }\n    });\n    activeDescendantControl.addEventListener('focusout', function () {\n      clearActiveDescendant();\n    });\n  } else {\n    container.addEventListener('focusin', function (event) {\n      if (event.target instanceof HTMLElement) {\n        if (elementIndexFocusedByClick !== undefined) {\n          if (elementIndexFocusedByClick >= 0) {\n            if (focusableElements[elementIndexFocusedByClick] !== currentFocusedElement) {\n              updateFocusedElement(focusableElements[elementIndexFocusedByClick]);\n            }\n          }\n          elementIndexFocusedByClick = undefined;\n        } else {\n          if (focusInStrategy === 'previous') {\n            updateFocusedElement(event.target);\n          } else if (focusInStrategy === 'closest' || focusInStrategy === 'first') {\n            if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n              var targetElementIndex = lastKeyboardFocusDirection === 'previous' ? focusableElements.length - 1 : 0;\n              var targetElement = focusableElements[targetElementIndex];\n              targetElement === null || targetElement === void 0 ? void 0 : targetElement.focus({\n                preventScroll: preventScroll\n              });\n              return;\n            } else {\n              updateFocusedElement(event.target);\n            }\n          } else if (typeof focusInStrategy === 'function') {\n            if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n              var elementToFocus = focusInStrategy(event.relatedTarget);\n              var requestedFocusElementIndex = elementToFocus ? focusableElements.indexOf(elementToFocus) : -1;\n              if (requestedFocusElementIndex >= 0 && elementToFocus instanceof HTMLElement) {\n                elementToFocus.focus({\n                  preventScroll: preventScroll\n                });\n                return;\n              } else {\n                console.warn('Element requested is not a known focusable element.');\n              }\n            } else {\n              updateFocusedElement(event.target);\n            }\n          }\n        }\n      }\n      lastKeyboardFocusDirection = undefined;\n    }, {\n      signal: signal\n    });\n  }\n  var keyboardEventRecipient = activeDescendantControl !== null && activeDescendantControl !== void 0 ? activeDescendantControl : container;\n  var lastKeyboardFocusDirection = undefined;\n  if (focusInStrategy === 'closest') {\n    document.addEventListener('keydown', function (event) {\n      if (event.key === 'Tab') {\n        lastKeyboardFocusDirection = getDirection(event);\n      }\n    }, {\n      signal: signal,\n      capture: true\n    });\n  }\n  function getCurrentFocusedIndex() {\n    if (!currentFocusedElement) {\n      return 0;\n    }\n    var focusedIndex = focusableElements.indexOf(currentFocusedElement);\n    var fallbackIndex = currentFocusedElement === container ? -1 : 0;\n    return focusedIndex !== -1 ? focusedIndex : fallbackIndex;\n  }\n  keyboardEventRecipient.addEventListener('keydown', function (event) {\n    var _a;\n    if (event.key in KEY_TO_DIRECTION) {\n      var keyBit = KEY_TO_BIT[event.key];\n      if (!event.defaultPrevented && (keyBit & bindKeys) > 0 && !shouldIgnoreFocusHandling(event, document.activeElement)) {\n        var direction = getDirection(event);\n        var nextElementToFocus = undefined;\n        if (settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) {\n          nextElementToFocus = settings.getNextFocusable(direction, (_a = document.activeElement) !== null && _a !== void 0 ? _a : undefined, event);\n        }\n        if (!nextElementToFocus) {\n          var lastFocusedIndex = getCurrentFocusedIndex();\n          var nextFocusedIndex = lastFocusedIndex;\n          if (direction === 'previous') {\n            nextFocusedIndex -= 1;\n          } else if (direction === 'start') {\n            nextFocusedIndex = 0;\n          } else if (direction === 'next') {\n            nextFocusedIndex += 1;\n          } else {\n            nextFocusedIndex = focusableElements.length - 1;\n          }\n          if (nextFocusedIndex < 0) {\n            if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n              nextFocusedIndex = focusableElements.length - 1;\n            } else {\n              nextFocusedIndex = 0;\n            }\n          }\n          if (nextFocusedIndex >= focusableElements.length) {\n            if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n              nextFocusedIndex = 0;\n            } else {\n              nextFocusedIndex = focusableElements.length - 1;\n            }\n          }\n          if (lastFocusedIndex !== nextFocusedIndex) {\n            nextElementToFocus = focusableElements[nextFocusedIndex];\n          }\n        }\n        if (activeDescendantControl) {\n          updateFocusedElement(nextElementToFocus || currentFocusedElement, true);\n        } else if (nextElementToFocus) {\n          lastKeyboardFocusDirection = direction;\n          nextElementToFocus.focus({\n            preventScroll: preventScroll\n          });\n        }\n        if (event.key !== 'Tab' || nextElementToFocus) {\n          event.preventDefault();\n        }\n      }\n    }\n  }, {\n    signal: signal\n  });\n  return controller;\n}","map":{"version":3,"names":["polyfill","eventListenerSignalPolyfill","isMacOS","iterateFocusableElements","uniqueId","FocusKeys","KEY_TO_BIT","ArrowLeft","ArrowHorizontal","ArrowDown","ArrowVertical","ArrowUp","ArrowRight","h","HL","j","JK","k","l","a","AD","s","WS","w","d","Tab","Home","HomeAndEnd","End","PageUp","PageUpDown","PageDown","Backspace","KEY_TO_DIRECTION","getDirection","keyboardEvent","direction","key","shiftKey","isMac","metaKey","ctrlKey","shouldIgnoreFocusHandling","activeElement","keyLength","length","isTextInput","HTMLInputElement","type","HTMLTextAreaElement","HTMLSelectElement","altKey","textInput","cursorAtStart","selectionStart","selectionEnd","cursorAtEnd","value","isActiveDescendantAttribute","activeDescendantActivatedDirectly","activeDescendantActivatedIndirectly","hasActiveDescendantAttribute","focusZone","container","settings","_a","_b","_c","_d","_e","focusableElements","savedTabIndex","WeakMap","bindKeys","getNextFocusable","ArrowAll","focusOutBehavior","focusInStrategy","activeDescendantControl","activeDescendantCallback","onActiveDescendantChanged","currentFocusedElement","preventScroll","getFirstFocusableElement","isActiveDescendantInputFocused","document","updateFocusedElement","to","directlyActivated","from","setActiveDescendant","clearActiveDescendant","has","setAttribute","id","removeAttribute","getAttribute","previouslyActiveElement","undefined","beginFocusManagement","elements","filteredElements","filter","e","focusableElementFilter","call","insertIndex","findIndex","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","splice","element","set","endFocusManagement","focusableElementIndex","indexOf","savedIndex","get","delete","nextElementToFocus","observer","MutationObserver","mutations","mutation","removedNodes","removedNode","HTMLElement","addedNodes","addedNode","observe","subtree","childList","controller","AbortController","signal","abortSignal","addEventListener","elementIndexFocusedByClick","event","target","includes","focus","focusableElement","find","contains","capture","relatedTarget","Element","targetElementIndex","lastKeyboardFocusDirection","targetElement","elementToFocus","requestedFocusElementIndex","console","warn","keyboardEventRecipient","getCurrentFocusedIndex","focusedIndex","fallbackIndex","keyBit","defaultPrevented","lastFocusedIndex","nextFocusedIndex","preventDefault"],"sources":["/Users/mohammedalzafarani/Desktop/personalwebsite/node_modules/@primer/behaviors/dist/esm/focus-zone.js"],"sourcesContent":["import { polyfill as eventListenerSignalPolyfill } from './polyfills/event-listener-signal.js';\nimport { isMacOS } from './utils/user-agent.js';\nimport { iterateFocusableElements } from './utils/iterate-focusable-elements.js';\nimport { uniqueId } from './utils/unique-id.js';\neventListenerSignalPolyfill();\nexport var FocusKeys;\n(function (FocusKeys) {\n    FocusKeys[FocusKeys[\"ArrowHorizontal\"] = 1] = \"ArrowHorizontal\";\n    FocusKeys[FocusKeys[\"ArrowVertical\"] = 2] = \"ArrowVertical\";\n    FocusKeys[FocusKeys[\"JK\"] = 4] = \"JK\";\n    FocusKeys[FocusKeys[\"HL\"] = 8] = \"HL\";\n    FocusKeys[FocusKeys[\"HomeAndEnd\"] = 16] = \"HomeAndEnd\";\n    FocusKeys[FocusKeys[\"PageUpDown\"] = 256] = \"PageUpDown\";\n    FocusKeys[FocusKeys[\"WS\"] = 32] = \"WS\";\n    FocusKeys[FocusKeys[\"AD\"] = 64] = \"AD\";\n    FocusKeys[FocusKeys[\"Tab\"] = 128] = \"Tab\";\n    FocusKeys[FocusKeys[\"Backspace\"] = 512] = \"Backspace\";\n    FocusKeys[FocusKeys[\"ArrowAll\"] = 3] = \"ArrowAll\";\n    FocusKeys[FocusKeys[\"HJKL\"] = 12] = \"HJKL\";\n    FocusKeys[FocusKeys[\"WASD\"] = 96] = \"WASD\";\n    FocusKeys[FocusKeys[\"All\"] = 511] = \"All\";\n})(FocusKeys || (FocusKeys = {}));\nconst KEY_TO_BIT = {\n    ArrowLeft: FocusKeys.ArrowHorizontal,\n    ArrowDown: FocusKeys.ArrowVertical,\n    ArrowUp: FocusKeys.ArrowVertical,\n    ArrowRight: FocusKeys.ArrowHorizontal,\n    h: FocusKeys.HL,\n    j: FocusKeys.JK,\n    k: FocusKeys.JK,\n    l: FocusKeys.HL,\n    a: FocusKeys.AD,\n    s: FocusKeys.WS,\n    w: FocusKeys.WS,\n    d: FocusKeys.AD,\n    Tab: FocusKeys.Tab,\n    Home: FocusKeys.HomeAndEnd,\n    End: FocusKeys.HomeAndEnd,\n    PageUp: FocusKeys.PageUpDown,\n    PageDown: FocusKeys.PageUpDown,\n    Backspace: FocusKeys.Backspace\n};\nconst KEY_TO_DIRECTION = {\n    ArrowLeft: 'previous',\n    ArrowDown: 'next',\n    ArrowUp: 'previous',\n    ArrowRight: 'next',\n    h: 'previous',\n    j: 'next',\n    k: 'previous',\n    l: 'next',\n    a: 'previous',\n    s: 'next',\n    w: 'previous',\n    d: 'next',\n    Tab: 'next',\n    Home: 'start',\n    End: 'end',\n    PageUp: 'start',\n    PageDown: 'end',\n    Backspace: 'previous'\n};\nfunction getDirection(keyboardEvent) {\n    const direction = KEY_TO_DIRECTION[keyboardEvent.key];\n    if (keyboardEvent.key === 'Tab' && keyboardEvent.shiftKey) {\n        return 'previous';\n    }\n    const isMac = isMacOS();\n    if ((isMac && keyboardEvent.metaKey) || (!isMac && keyboardEvent.ctrlKey)) {\n        if (keyboardEvent.key === 'ArrowLeft' || keyboardEvent.key === 'ArrowUp') {\n            return 'start';\n        }\n        else if (keyboardEvent.key === 'ArrowRight' || keyboardEvent.key === 'ArrowDown') {\n            return 'end';\n        }\n    }\n    return direction;\n}\nfunction shouldIgnoreFocusHandling(keyboardEvent, activeElement) {\n    const key = keyboardEvent.key;\n    const keyLength = [...key].length;\n    const isTextInput = (activeElement instanceof HTMLInputElement && activeElement.type === 'text') ||\n        activeElement instanceof HTMLTextAreaElement;\n    if (isTextInput && (keyLength === 1 || key === 'Home' || key === 'End')) {\n        return true;\n    }\n    if (activeElement instanceof HTMLSelectElement) {\n        if (keyLength === 1) {\n            return true;\n        }\n        if (key === 'ArrowDown' && isMacOS() && !keyboardEvent.metaKey) {\n            return true;\n        }\n        if (key === 'ArrowDown' && !isMacOS() && keyboardEvent.altKey) {\n            return true;\n        }\n    }\n    if (activeElement instanceof HTMLTextAreaElement && (key === 'PageUp' || key === 'PageDown')) {\n        return true;\n    }\n    if (isTextInput) {\n        const textInput = activeElement;\n        const cursorAtStart = textInput.selectionStart === 0 && textInput.selectionEnd === 0;\n        const cursorAtEnd = textInput.selectionStart === textInput.value.length && textInput.selectionEnd === textInput.value.length;\n        if (key === 'ArrowLeft' && !cursorAtStart) {\n            return true;\n        }\n        if (key === 'ArrowRight' && !cursorAtEnd) {\n            return true;\n        }\n        if (textInput instanceof HTMLTextAreaElement) {\n            if (key === 'ArrowUp' && !cursorAtStart) {\n                return true;\n            }\n            if (key === 'ArrowDown' && !cursorAtEnd) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nexport const isActiveDescendantAttribute = 'data-is-active-descendant';\nexport const activeDescendantActivatedDirectly = 'activated-directly';\nexport const activeDescendantActivatedIndirectly = 'activated-indirectly';\nexport const hasActiveDescendantAttribute = 'data-has-active-descendant';\nexport function focusZone(container, settings) {\n    var _a, _b, _c, _d, _e;\n    const focusableElements = [];\n    const savedTabIndex = new WeakMap();\n    const bindKeys = (_a = settings === null || settings === void 0 ? void 0 : settings.bindKeys) !== null && _a !== void 0 ? _a : ((settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) ? FocusKeys.ArrowAll : FocusKeys.ArrowVertical) | FocusKeys.HomeAndEnd;\n    const focusOutBehavior = (_b = settings === null || settings === void 0 ? void 0 : settings.focusOutBehavior) !== null && _b !== void 0 ? _b : 'stop';\n    const focusInStrategy = (_c = settings === null || settings === void 0 ? void 0 : settings.focusInStrategy) !== null && _c !== void 0 ? _c : 'previous';\n    const activeDescendantControl = settings === null || settings === void 0 ? void 0 : settings.activeDescendantControl;\n    const activeDescendantCallback = settings === null || settings === void 0 ? void 0 : settings.onActiveDescendantChanged;\n    let currentFocusedElement;\n    const preventScroll = (_d = settings === null || settings === void 0 ? void 0 : settings.preventScroll) !== null && _d !== void 0 ? _d : false;\n    function getFirstFocusableElement() {\n        return focusableElements[0];\n    }\n    function isActiveDescendantInputFocused() {\n        return document.activeElement === activeDescendantControl;\n    }\n    function updateFocusedElement(to, directlyActivated = false) {\n        const from = currentFocusedElement;\n        currentFocusedElement = to;\n        if (activeDescendantControl) {\n            if (to && isActiveDescendantInputFocused()) {\n                setActiveDescendant(from, to, directlyActivated);\n            }\n            else {\n                clearActiveDescendant();\n            }\n            return;\n        }\n        if (from && from !== to && savedTabIndex.has(from)) {\n            from.setAttribute('tabindex', '-1');\n        }\n        to === null || to === void 0 ? void 0 : to.setAttribute('tabindex', '0');\n    }\n    function setActiveDescendant(from, to, directlyActivated = false) {\n        if (!to.id) {\n            to.setAttribute('id', uniqueId());\n        }\n        if (from && from !== to) {\n            from.removeAttribute(isActiveDescendantAttribute);\n        }\n        if (!activeDescendantControl ||\n            (!directlyActivated && activeDescendantControl.getAttribute('aria-activedescendant') === to.id)) {\n            return;\n        }\n        activeDescendantControl.setAttribute('aria-activedescendant', to.id);\n        container.setAttribute(hasActiveDescendantAttribute, to.id);\n        to.setAttribute(isActiveDescendantAttribute, directlyActivated ? activeDescendantActivatedDirectly : activeDescendantActivatedIndirectly);\n        activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(to, from, directlyActivated);\n    }\n    function clearActiveDescendant(previouslyActiveElement = currentFocusedElement) {\n        if (focusInStrategy === 'first') {\n            currentFocusedElement = undefined;\n        }\n        activeDescendantControl === null || activeDescendantControl === void 0 ? void 0 : activeDescendantControl.removeAttribute('aria-activedescendant');\n        container.removeAttribute(hasActiveDescendantAttribute);\n        previouslyActiveElement === null || previouslyActiveElement === void 0 ? void 0 : previouslyActiveElement.removeAttribute(isActiveDescendantAttribute);\n        activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(undefined, previouslyActiveElement, false);\n    }\n    function beginFocusManagement(...elements) {\n        const filteredElements = elements.filter(e => { var _a, _b; return (_b = (_a = settings === null || settings === void 0 ? void 0 : settings.focusableElementFilter) === null || _a === void 0 ? void 0 : _a.call(settings, e)) !== null && _b !== void 0 ? _b : true; });\n        if (filteredElements.length === 0) {\n            return;\n        }\n        const insertIndex = focusableElements.findIndex(e => (e.compareDocumentPosition(filteredElements[0]) & Node.DOCUMENT_POSITION_PRECEDING) > 0);\n        focusableElements.splice(insertIndex === -1 ? focusableElements.length : insertIndex, 0, ...filteredElements);\n        for (const element of filteredElements) {\n            if (!savedTabIndex.has(element)) {\n                savedTabIndex.set(element, element.getAttribute('tabindex'));\n            }\n            element.setAttribute('tabindex', '-1');\n        }\n        if (!currentFocusedElement) {\n            updateFocusedElement(getFirstFocusableElement());\n        }\n    }\n    function endFocusManagement(...elements) {\n        for (const element of elements) {\n            const focusableElementIndex = focusableElements.indexOf(element);\n            if (focusableElementIndex >= 0) {\n                focusableElements.splice(focusableElementIndex, 1);\n            }\n            const savedIndex = savedTabIndex.get(element);\n            if (savedIndex !== undefined) {\n                if (savedIndex === null) {\n                    element.removeAttribute('tabindex');\n                }\n                else {\n                    element.setAttribute('tabindex', savedIndex);\n                }\n                savedTabIndex.delete(element);\n            }\n            if (element === currentFocusedElement) {\n                const nextElementToFocus = getFirstFocusableElement();\n                updateFocusedElement(nextElementToFocus);\n            }\n        }\n    }\n    beginFocusManagement(...iterateFocusableElements(container));\n    updateFocusedElement(getFirstFocusableElement());\n    const observer = new MutationObserver(mutations => {\n        for (const mutation of mutations) {\n            for (const removedNode of mutation.removedNodes) {\n                if (removedNode instanceof HTMLElement) {\n                    endFocusManagement(...iterateFocusableElements(removedNode));\n                }\n            }\n        }\n        for (const mutation of mutations) {\n            for (const addedNode of mutation.addedNodes) {\n                if (addedNode instanceof HTMLElement) {\n                    beginFocusManagement(...iterateFocusableElements(addedNode));\n                }\n            }\n        }\n    });\n    observer.observe(container, {\n        subtree: true,\n        childList: true\n    });\n    const controller = new AbortController();\n    const signal = (_e = settings === null || settings === void 0 ? void 0 : settings.abortSignal) !== null && _e !== void 0 ? _e : controller.signal;\n    signal.addEventListener('abort', () => {\n        endFocusManagement(...focusableElements);\n    });\n    let elementIndexFocusedByClick = undefined;\n    container.addEventListener('mousedown', event => {\n        if (event.target instanceof HTMLElement && event.target !== document.activeElement) {\n            elementIndexFocusedByClick = focusableElements.indexOf(event.target);\n        }\n    }, { signal });\n    if (activeDescendantControl) {\n        container.addEventListener('focusin', event => {\n            if (event.target instanceof HTMLElement && focusableElements.includes(event.target)) {\n                activeDescendantControl.focus({ preventScroll });\n                updateFocusedElement(event.target);\n            }\n        });\n        container.addEventListener('mousemove', ({ target }) => {\n            if (!(target instanceof Node)) {\n                return;\n            }\n            const focusableElement = focusableElements.find(element => element.contains(target));\n            if (focusableElement) {\n                updateFocusedElement(focusableElement);\n            }\n        }, { signal, capture: true });\n        activeDescendantControl.addEventListener('focusin', () => {\n            if (!currentFocusedElement) {\n                updateFocusedElement(getFirstFocusableElement());\n            }\n            else {\n                setActiveDescendant(undefined, currentFocusedElement);\n            }\n        });\n        activeDescendantControl.addEventListener('focusout', () => {\n            clearActiveDescendant();\n        });\n    }\n    else {\n        container.addEventListener('focusin', event => {\n            if (event.target instanceof HTMLElement) {\n                if (elementIndexFocusedByClick !== undefined) {\n                    if (elementIndexFocusedByClick >= 0) {\n                        if (focusableElements[elementIndexFocusedByClick] !== currentFocusedElement) {\n                            updateFocusedElement(focusableElements[elementIndexFocusedByClick]);\n                        }\n                    }\n                    elementIndexFocusedByClick = undefined;\n                }\n                else {\n                    if (focusInStrategy === 'previous') {\n                        updateFocusedElement(event.target);\n                    }\n                    else if (focusInStrategy === 'closest' || focusInStrategy === 'first') {\n                        if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n                            const targetElementIndex = lastKeyboardFocusDirection === 'previous' ? focusableElements.length - 1 : 0;\n                            const targetElement = focusableElements[targetElementIndex];\n                            targetElement === null || targetElement === void 0 ? void 0 : targetElement.focus({ preventScroll });\n                            return;\n                        }\n                        else {\n                            updateFocusedElement(event.target);\n                        }\n                    }\n                    else if (typeof focusInStrategy === 'function') {\n                        if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n                            const elementToFocus = focusInStrategy(event.relatedTarget);\n                            const requestedFocusElementIndex = elementToFocus ? focusableElements.indexOf(elementToFocus) : -1;\n                            if (requestedFocusElementIndex >= 0 && elementToFocus instanceof HTMLElement) {\n                                elementToFocus.focus({ preventScroll });\n                                return;\n                            }\n                            else {\n                                console.warn('Element requested is not a known focusable element.');\n                            }\n                        }\n                        else {\n                            updateFocusedElement(event.target);\n                        }\n                    }\n                }\n            }\n            lastKeyboardFocusDirection = undefined;\n        }, { signal });\n    }\n    const keyboardEventRecipient = activeDescendantControl !== null && activeDescendantControl !== void 0 ? activeDescendantControl : container;\n    let lastKeyboardFocusDirection = undefined;\n    if (focusInStrategy === 'closest') {\n        document.addEventListener('keydown', event => {\n            if (event.key === 'Tab') {\n                lastKeyboardFocusDirection = getDirection(event);\n            }\n        }, { signal, capture: true });\n    }\n    function getCurrentFocusedIndex() {\n        if (!currentFocusedElement) {\n            return 0;\n        }\n        const focusedIndex = focusableElements.indexOf(currentFocusedElement);\n        const fallbackIndex = currentFocusedElement === container ? -1 : 0;\n        return focusedIndex !== -1 ? focusedIndex : fallbackIndex;\n    }\n    keyboardEventRecipient.addEventListener('keydown', event => {\n        var _a;\n        if (event.key in KEY_TO_DIRECTION) {\n            const keyBit = KEY_TO_BIT[event.key];\n            if (!event.defaultPrevented &&\n                (keyBit & bindKeys) > 0 &&\n                !shouldIgnoreFocusHandling(event, document.activeElement)) {\n                const direction = getDirection(event);\n                let nextElementToFocus = undefined;\n                if (settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) {\n                    nextElementToFocus = settings.getNextFocusable(direction, (_a = document.activeElement) !== null && _a !== void 0 ? _a : undefined, event);\n                }\n                if (!nextElementToFocus) {\n                    const lastFocusedIndex = getCurrentFocusedIndex();\n                    let nextFocusedIndex = lastFocusedIndex;\n                    if (direction === 'previous') {\n                        nextFocusedIndex -= 1;\n                    }\n                    else if (direction === 'start') {\n                        nextFocusedIndex = 0;\n                    }\n                    else if (direction === 'next') {\n                        nextFocusedIndex += 1;\n                    }\n                    else {\n                        nextFocusedIndex = focusableElements.length - 1;\n                    }\n                    if (nextFocusedIndex < 0) {\n                        if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n                            nextFocusedIndex = focusableElements.length - 1;\n                        }\n                        else {\n                            nextFocusedIndex = 0;\n                        }\n                    }\n                    if (nextFocusedIndex >= focusableElements.length) {\n                        if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n                            nextFocusedIndex = 0;\n                        }\n                        else {\n                            nextFocusedIndex = focusableElements.length - 1;\n                        }\n                    }\n                    if (lastFocusedIndex !== nextFocusedIndex) {\n                        nextElementToFocus = focusableElements[nextFocusedIndex];\n                    }\n                }\n                if (activeDescendantControl) {\n                    updateFocusedElement(nextElementToFocus || currentFocusedElement, true);\n                }\n                else if (nextElementToFocus) {\n                    lastKeyboardFocusDirection = direction;\n                    nextElementToFocus.focus({ preventScroll });\n                }\n                if (event.key !== 'Tab' || nextElementToFocus) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }, { signal });\n    return controller;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}